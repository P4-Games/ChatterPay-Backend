{"abi":[{"type":"function","name":"cancelPayment","inputs":[{"name":"_erc20","type":"address","internalType":"address"},{"name":"_id","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"commitForPayment","inputs":[{"name":"_id","type":"uint256","internalType":"uint256"},{"name":"_commitmentHash","type":"bytes32","internalType":"bytes32"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"payments","inputs":[{"name":"id","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"wallet","type":"address","internalType":"address"},{"name":"token","type":"address","internalType":"address"},{"name":"balance","type":"uint256","internalType":"uint256"},{"name":"passwordHash","type":"bytes32","internalType":"bytes32"},{"name":"redeemer","type":"address","internalType":"address"},{"name":"isReserved","type":"bool","internalType":"bool"},{"name":"isCommited","type":"bool","internalType":"bool"},{"name":"isRedeemed","type":"bool","internalType":"bool"},{"name":"commitTimestamp","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"redeemPayment","inputs":[{"name":"_id","type":"uint256","internalType":"uint256"},{"name":"_password","type":"string","internalType":"string"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"reservePayment","inputs":[{"name":"_erc20","type":"address","internalType":"address"},{"name":"_id","type":"uint256","internalType":"uint256"},{"name":"_amount","type":"uint256","internalType":"uint256"},{"name":"_passwordHash","type":"bytes32","internalType":"bytes32"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"event","name":"PaymentCancelled","inputs":[{"name":"payer","type":"address","indexed":true,"internalType":"address"},{"name":"token","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"PaymentCommitted","inputs":[{"name":"commiter","type":"address","indexed":true,"internalType":"address"},{"name":"token","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":true,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"PaymentRedeemed","inputs":[{"name":"wallet","type":"address","indexed":true,"internalType":"address"},{"name":"token","type":"address","indexed":true,"internalType":"address"},{"name":"redeemer","type":"address","indexed":false,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"PaymentReserved","inputs":[{"name":"payer","type":"address","indexed":true,"internalType":"address"},{"name":"token","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":true,"internalType":"uint256"}],"anonymous":false},{"type":"error","name":"ChatterPayVault__CannotCancelActiveCommit","inputs":[]},{"type":"error","name":"ChatterPayVault__CommitmentExpired","inputs":[]},{"type":"error","name":"ChatterPayVault__IncorrectPassword","inputs":[]},{"type":"error","name":"ChatterPayVault__InvalidCommitmentHash","inputs":[]},{"type":"error","name":"ChatterPayVault__InvalidId","inputs":[]},{"type":"error","name":"ChatterPayVault__NoBalanceToCancel","inputs":[]},{"type":"error","name":"ChatterPayVault__NoBalanceToRedeem","inputs":[]},{"type":"error","name":"ChatterPayVault__UnauthorizedCancel","inputs":[]},{"type":"error","name":"ChatterPayVault__UnauthorizedRedeemer","inputs":[]}],"bytecode":{"object":"0x608060405234801561000f575f80fd5b50610b0c8061001d5f395ff3fe608060405234801561000f575f80fd5b5060043610610055575f3560e01c80632a44895e14610059578063483e7aaa1461006e57806387d8178914610081578063a20dfe6b14610150578063f76dac1414610163575b5f80fd5b61006c6100673660046108e8565b610176565b005b61006c61007c36600461091e565b610414565b6100f361008f36600461093e565b5f602081905290815260409020805460018201546002830154600384015460048501546005909501546001600160a01b0394851695938516949293919282169160ff600160a01b8204811692600160a81b8304821692600160b01b90049091169089565b604080516001600160a01b039a8b168152988a1660208a01528801969096526060870194909452959091166080850152151560a084015292151560c083015291151560e08201526101008101919091526101200160405180910390f35b61006c61015e366004610955565b610523565b61006c610171366004610991565b6106c6565b5f83815260208190526040902060040154600160a01b900460ff16806101b357505f83815260208190526040902060040154600160b01b900460ff165b156101d15760405163794015e560e01b815260040160405180910390fd5b604051806101200160405280336001600160a01b03168152602001856001600160a01b031681526020018381526020018281526020015f6001600160a01b031681526020016001151581526020015f151581526020015f151581526020015f8152505f808581526020019081526020015f205f820151815f015f6101000a8154816001600160a01b0302191690836001600160a01b031602179055506020820151816001015f6101000a8154816001600160a01b0302191690836001600160a01b0316021790555060408201518160020155606082015181600301556080820151816004015f6101000a8154816001600160a01b0302191690836001600160a01b0316021790555060a08201518160040160146101000a81548160ff02191690831515021790555060c08201518160040160156101000a81548160ff02191690831515021790555060e08201518160040160166101000a81548160ff0219169083151502179055506101008201518160050155905050836001600160a01b03166323b872dd3330856040518463ffffffff1660e01b8152600401610396939291906001600160a01b039384168152919092166020820152604081019190915260600190565b6020604051808303815f875af11580156103b2573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906103d69190610a46565b5060405182906001600160a01b0386169033907fb74b7c7ca42c663ff8f674aa85c6a816f6f9b3e3234f691d63e151e10caf8e82905f90a450505050565b5f82815260208190526040902060040154600160a81b900460ff168061045157505f82815260208190526040902060040154600160b01b900460ff165b1561046f5760405163794015e560e01b815260040160405180910390fd5b5f82815260208190526040902060030154811461049f576040516392f8d0fd60e01b815260040160405180910390fd5b5f8281526020819052604080822060048101805460ff60a81b1933908116600161ff0160a01b031990921691909117600160a81b179091554260058301556002820154600190920154925191936001600160a01b03939093169290917f3e80db7390ae4ef4b7beb331e5873eb085e244068fa3c537c1161f73be75b09a9190a45050565b5f81815260208190526040902080546001600160a01b0316331461055a57604051631eabf4fd60e21b815260040160405180910390fd5b80600201545f0361057e57604051634ad71bcb60e01b815260040160405180910390fd5b6003810154156105b957610e10816005015461059a9190610a6c565b42116105b95760405163d851973b60e01b815260040160405180910390fd5b6002810180545f90915560405163a9059cbb60e01b81526001600160a01b0385169063a9059cbb906105f19033908590600401610a91565b6020604051808303815f875af115801561060d573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106319190610a46565b505f8381526020818152604080832080546001600160a01b03199081168255600182018054909116905560028101849055600381018490556004810180546001600160b81b03191690556005019290925590518281526001600160a01b0386169133917f76c53469c368a39727f3ece1c151861abb04b9daf5c17d54ed279c3de4ddf76591015b60405180910390a350505050565b5f8281526020819052604090206004810154600160b01b900460ff16806106f957506004810154600160a81b900460ff16155b156107175760405163794015e560e01b815260040160405180910390fd5b60048101546001600160a01b0316331461074457604051635ff5f45960e01b815260040160405180910390fd5b80600201545f0361076857604051638c4064cb60e01b815260040160405180910390fd5b610e10816005015461077a9190610a6c565b42111561079a576040516399bc351760e01b815260040160405180910390fd5b8060030154826040516020016107b09190610aaa565b60405160208183030381529060405280519060200120146107e4576040516303f08a3360e31b815260040160405180910390fd5b6002810180545f918290556004808401805462ffffff60a01b1916600160b01b1790556003840192909255600183015460405163a9059cbb60e01b815291926001600160a01b039091169163a9059cbb91610843913391869101610a91565b6020604051808303815f875af115801561085f573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906108839190610a46565b50600182015482546040516001600160a01b0392831692909116907f6f1500ba3043953f72e661f2fe4b50f929a18cb932e3ef2671a9e9c7a4330507906106b89033908690610a91565b80356001600160a01b03811681146108e3575f80fd5b919050565b5f805f80608085870312156108fb575f80fd5b610904856108cd565b966020860135965060408601359560600135945092505050565b5f806040838503121561092f575f80fd5b50508035926020909101359150565b5f6020828403121561094e575f80fd5b5035919050565b5f8060408385031215610966575f80fd5b61096f836108cd565b946020939093013593505050565b634e487b7160e01b5f52604160045260245ffd5b5f80604083850312156109a2575f80fd5b82359150602083013567ffffffffffffffff808211156109c0575f80fd5b818501915085601f8301126109d3575f80fd5b8135818111156109e5576109e561097d565b604051601f8201601f19908116603f01168101908382118183101715610a0d57610a0d61097d565b81604052828152886020848701011115610a25575f80fd5b826020860160208301375f6020848301015280955050505050509250929050565b5f60208284031215610a56575f80fd5b81518015158114610a65575f80fd5b9392505050565b80820180821115610a8b57634e487b7160e01b5f52601160045260245ffd5b92915050565b6001600160a01b03929092168252602082015260400190565b5f82515f5b81811015610ac95760208186018101518583015201610aaf565b505f92019182525091905056fea2646970667358221220df9e7a01953fe8e8fe3e13f8b2dd1b04f57c72d089f9331f3d47b7e4acb3cbca64736f6c63430008180033","sourceMap":"915:7196:109:-:0;;;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x608060405234801561000f575f80fd5b5060043610610055575f3560e01c80632a44895e14610059578063483e7aaa1461006e57806387d8178914610081578063a20dfe6b14610150578063f76dac1414610163575b5f80fd5b61006c6100673660046108e8565b610176565b005b61006c61007c36600461091e565b610414565b6100f361008f36600461093e565b5f602081905290815260409020805460018201546002830154600384015460048501546005909501546001600160a01b0394851695938516949293919282169160ff600160a01b8204811692600160a81b8304821692600160b01b90049091169089565b604080516001600160a01b039a8b168152988a1660208a01528801969096526060870194909452959091166080850152151560a084015292151560c083015291151560e08201526101008101919091526101200160405180910390f35b61006c61015e366004610955565b610523565b61006c610171366004610991565b6106c6565b5f83815260208190526040902060040154600160a01b900460ff16806101b357505f83815260208190526040902060040154600160b01b900460ff165b156101d15760405163794015e560e01b815260040160405180910390fd5b604051806101200160405280336001600160a01b03168152602001856001600160a01b031681526020018381526020018281526020015f6001600160a01b031681526020016001151581526020015f151581526020015f151581526020015f8152505f808581526020019081526020015f205f820151815f015f6101000a8154816001600160a01b0302191690836001600160a01b031602179055506020820151816001015f6101000a8154816001600160a01b0302191690836001600160a01b0316021790555060408201518160020155606082015181600301556080820151816004015f6101000a8154816001600160a01b0302191690836001600160a01b0316021790555060a08201518160040160146101000a81548160ff02191690831515021790555060c08201518160040160156101000a81548160ff02191690831515021790555060e08201518160040160166101000a81548160ff0219169083151502179055506101008201518160050155905050836001600160a01b03166323b872dd3330856040518463ffffffff1660e01b8152600401610396939291906001600160a01b039384168152919092166020820152604081019190915260600190565b6020604051808303815f875af11580156103b2573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906103d69190610a46565b5060405182906001600160a01b0386169033907fb74b7c7ca42c663ff8f674aa85c6a816f6f9b3e3234f691d63e151e10caf8e82905f90a450505050565b5f82815260208190526040902060040154600160a81b900460ff168061045157505f82815260208190526040902060040154600160b01b900460ff165b1561046f5760405163794015e560e01b815260040160405180910390fd5b5f82815260208190526040902060030154811461049f576040516392f8d0fd60e01b815260040160405180910390fd5b5f8281526020819052604080822060048101805460ff60a81b1933908116600161ff0160a01b031990921691909117600160a81b179091554260058301556002820154600190920154925191936001600160a01b03939093169290917f3e80db7390ae4ef4b7beb331e5873eb085e244068fa3c537c1161f73be75b09a9190a45050565b5f81815260208190526040902080546001600160a01b0316331461055a57604051631eabf4fd60e21b815260040160405180910390fd5b80600201545f0361057e57604051634ad71bcb60e01b815260040160405180910390fd5b6003810154156105b957610e10816005015461059a9190610a6c565b42116105b95760405163d851973b60e01b815260040160405180910390fd5b6002810180545f90915560405163a9059cbb60e01b81526001600160a01b0385169063a9059cbb906105f19033908590600401610a91565b6020604051808303815f875af115801561060d573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106319190610a46565b505f8381526020818152604080832080546001600160a01b03199081168255600182018054909116905560028101849055600381018490556004810180546001600160b81b03191690556005019290925590518281526001600160a01b0386169133917f76c53469c368a39727f3ece1c151861abb04b9daf5c17d54ed279c3de4ddf76591015b60405180910390a350505050565b5f8281526020819052604090206004810154600160b01b900460ff16806106f957506004810154600160a81b900460ff16155b156107175760405163794015e560e01b815260040160405180910390fd5b60048101546001600160a01b0316331461074457604051635ff5f45960e01b815260040160405180910390fd5b80600201545f0361076857604051638c4064cb60e01b815260040160405180910390fd5b610e10816005015461077a9190610a6c565b42111561079a576040516399bc351760e01b815260040160405180910390fd5b8060030154826040516020016107b09190610aaa565b60405160208183030381529060405280519060200120146107e4576040516303f08a3360e31b815260040160405180910390fd5b6002810180545f918290556004808401805462ffffff60a01b1916600160b01b1790556003840192909255600183015460405163a9059cbb60e01b815291926001600160a01b039091169163a9059cbb91610843913391869101610a91565b6020604051808303815f875af115801561085f573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906108839190610a46565b50600182015482546040516001600160a01b0392831692909116907f6f1500ba3043953f72e661f2fe4b50f929a18cb932e3ef2671a9e9c7a4330507906106b89033908690610a91565b80356001600160a01b03811681146108e3575f80fd5b919050565b5f805f80608085870312156108fb575f80fd5b610904856108cd565b966020860135965060408601359560600135945092505050565b5f806040838503121561092f575f80fd5b50508035926020909101359150565b5f6020828403121561094e575f80fd5b5035919050565b5f8060408385031215610966575f80fd5b61096f836108cd565b946020939093013593505050565b634e487b7160e01b5f52604160045260245ffd5b5f80604083850312156109a2575f80fd5b82359150602083013567ffffffffffffffff808211156109c0575f80fd5b818501915085601f8301126109d3575f80fd5b8135818111156109e5576109e561097d565b604051601f8201601f19908116603f01168101908382118183101715610a0d57610a0d61097d565b81604052828152886020848701011115610a25575f80fd5b826020860160208301375f6020848301015280955050505050509250929050565b5f60208284031215610a56575f80fd5b81518015158114610a65575f80fd5b9392505050565b80820180821115610a8b57634e487b7160e01b5f52601160045260245ffd5b92915050565b6001600160a01b03929092168252602082015260400190565b5f82515f5b81811015610ac95760208186018101518583015201610aaf565b505f92019182525091905056fea2646970667358221220df9e7a01953fe8e8fe3e13f8b2dd1b04f57c72d089f9331f3d47b7e4acb3cbca64736f6c63430008180033","sourceMap":"915:7196:109:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2570:725;;;;;;:::i;:::-;;:::i;:::-;;3924:589;;;;;;:::i;:::-;;:::i;1370:46::-;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;1370:46:109;;;;;;;;;;;;;;;;-1:-1:-1;;;1370:46:109;;;;;-1:-1:-1;;;1370:46:109;;;;;-1:-1:-1;;;1370:46:109;;;;;;;;;;;;-1:-1:-1;;;;;1435:15:123;;;1417:34;;1487:15;;;1482:2;1467:18;;1460:43;1519:18;;1512:34;;;;1577:2;1562:18;;1555:34;;;;1626:15;;;;1620:3;1605:19;;1598:44;1686:14;1679:22;1397:3;1658:19;;1651:51;1746:14;;1739:22;1733:3;1718:19;;1711:51;1806:14;;1799:22;1793:3;1778:19;;1771:51;1853:3;1838:19;;1831:35;;;;1366:3;1351:19;1370:46:109;;;;;;;7213:896;;;;;;:::i;:::-;;:::i;5394:1144::-;;;;;;:::i;:::-;;:::i;2570:725::-;2722:8;:13;;;;;;;;;;:24;;;-1:-1:-1;;;2722:24:109;;;;;:52;;-1:-1:-1;2750:8:109;:13;;;;;;;;;;:24;;;-1:-1:-1;;;2750:24:109;;;;2722:52;2718:105;;;2795:28;;-1:-1:-1;;;2795:28:109;;;;;;;;;;;2718:105;2849:307;;;;;;;;2879:10;-1:-1:-1;;;;;2849:307:109;;;;;2910:6;-1:-1:-1;;;;;2849:307:109;;;;;2939:7;2849:307;;;;2974:13;2849:307;;;;3019:1;-1:-1:-1;;;;;2849:307:109;;;;;3047:4;2849:307;;;;;;3077:5;2849:307;;;;;;3108:5;2849:307;;;;;;3144:1;2849:307;;;2833:8;:13;2842:3;2833:13;;;;;;;;;;;:323;;;;;;;;;;;;;-1:-1:-1;;;;;2833:323:109;;;;;-1:-1:-1;;;;;2833:323:109;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;2833:323:109;;;;;-1:-1:-1;;;;;2833:323:109;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;2833:323:109;;;;;-1:-1:-1;;;;;2833:323:109;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;3173:6;-1:-1:-1;;;;;3166:27:109;;3194:10;3214:4;3221:7;3166:63;;;;;;;;;;;;;;;;-1:-1:-1;;;;;3521:15:123;;;3503:34;;3573:15;;;;3568:2;3553:18;;3546:43;3620:2;3605:18;;3598:34;;;;3453:2;3438:18;;3263:375;3166:63:109;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;-1:-1:-1;3244:44:109;;3280:7;;-1:-1:-1;;;;;3244:44:109;;;3260:10;;3244:44;;;;;2570:725;;;;:::o;3924:589::-;4009:8;:13;;;;;;;;;;:24;;;-1:-1:-1;;;4009:24:109;;;;;:52;;-1:-1:-1;4037:8:109;:13;;;;;;;;;;:24;;;-1:-1:-1;;;4037:24:109;;;;4009:52;4005:105;;;4082:28;;-1:-1:-1;;;4082:28:109;;;;;;;;;;;4005:105;4124:8;:13;;;;;;;;;;:26;;;:45;;4120:110;;4190:40;;-1:-1:-1;;;4190:40:109;;;;;;;;;;;4120:110;4240:8;:13;;;;;;;;;;;:22;;;:35;;-1:-1:-1;;;;4265:10:109;4285:31;;;-1:-1:-1;;;;;;4285:31:109;;;;;;;-1:-1:-1;;;4285:31:109;;;;4358:15;4326:29;;;:47;4475:21;;;;4240:35;4442:19;;;;4388:118;;4475:21;;-1:-1:-1;;;;;4442:19:109;;;;;4265:10;;4388:118;;4240:8;4388:118;3924:589;;:::o;7213:896::-;7282:23;7308:13;;;;;;;;;;7335:14;;-1:-1:-1;;;;;7335:14:109;7353:10;7335:28;7331:90;;7384:37;;-1:-1:-1;;;7384:37:109;;;;;;;;;;;7331:90;7435:7;:15;;;7454:1;7435:20;7431:69;;7464:36;;-1:-1:-1;;;7464:36:109;;;;;;;;;;;7431:69;7564:20;;;;:34;7560:274;;1356:7;7699;:23;;;:40;;;;:::i;:::-;7680:15;:59;7676:148;;7766:43;;-1:-1:-1;;;7766:43:109;;;;;;;;;;;7676:148;7915:15;;;;;7898:14;7940:19;;;7969:43;;-1:-1:-1;;;7969:43:109;;-1:-1:-1;;;;;7969:23:109;;;;;:43;;7993:10;;7915:15;;7969:43;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;-1:-1:-1;8029:8:109;:13;;;;;;;;;;;8022:20;;-1:-1:-1;;;;;;8022:20:109;;;;;-1:-1:-1;8022:20:109;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;;8022:20:109;;;;;;;;;8058:44;;4577:25:123;;;-1:-1:-1;;;;;8058:44:109;;;8075:10;;8058:44;;4550:18:123;8058:44:109;;;;;;;;7272:837;;7213:896;;:::o;5394:1144::-;5472:23;5498:13;;;;;;;;;;5525:18;;;;-1:-1:-1;;;5525:18:109;;;;;:41;;-1:-1:-1;5548:18:109;;;;-1:-1:-1;;;5548:18:109;;;;5547:19;5525:41;5521:94;;;5587:28;;-1:-1:-1;;;5587:28:109;;;;;;;;;;;5521:94;5629:16;;;;-1:-1:-1;;;;;5629:16:109;5649:10;5629:30;5625:94;;5680:39;;-1:-1:-1;;;5680:39:109;;;;;;;;;;;5625:94;5733:7;:15;;;5752:1;5733:20;5729:69;;5762:36;;-1:-1:-1;;;5762:36:109;;;;;;;;;;;5729:69;1356:7;5831;:23;;;:40;;;;:::i;:::-;5813:15;:58;5809:132;;;5894:36;;-1:-1:-1;;;5894:36:109;;;;;;;;;;;5809:132;6060:7;:20;;;6045:9;6028:27;;;;;;;;:::i;:::-;;;;;;;;;;;;;6018:38;;;;;;:62;6014:123;;6101:36;;-1:-1:-1;;;6101:36:109;;;;;;;;;;;6014:123;6195:15;;;;;6178:14;6220:19;;;;6249:18;;;;:25;;-1:-1:-1;;;;6320:26:109;-1:-1:-1;;;6320:26:109;;;6356:20;;;:33;;;;-1:-1:-1;6406:13:109;;;6399:50;;-1:-1:-1;;;6399:50:109;;6195:15;;-1:-1:-1;;;;;6406:13:109;;;;6399:30;;:50;;6430:10;;6195:15;;6399:50;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;-1:-1:-1;6497:13:109;;;;6481:14;;6465:66;;-1:-1:-1;;;;;6497:13:109;;;;6481:14;;;;6465:66;;;;6512:10;;6524:6;;6465:66;:::i;14:173:123:-;82:20;;-1:-1:-1;;;;;131:31:123;;121:42;;111:70;;177:1;174;167:12;111:70;14:173;;;:::o;192:391::-;278:6;286;294;302;355:3;343:9;334:7;330:23;326:33;323:53;;;372:1;369;362:12;323:53;395:29;414:9;395:29;:::i;:::-;385:39;471:2;456:18;;443:32;;-1:-1:-1;522:2:123;507:18;;494:32;;573:2;558:18;545:32;;-1:-1:-1;192:391:123;-1:-1:-1;;;192:391:123:o;588:248::-;656:6;664;717:2;705:9;696:7;692:23;688:32;685:52;;;733:1;730;723:12;685:52;-1:-1:-1;;756:23:123;;;826:2;811:18;;;798:32;;-1:-1:-1;588:248:123:o;841:180::-;900:6;953:2;941:9;932:7;928:23;924:32;921:52;;;969:1;966;959:12;921:52;-1:-1:-1;992:23:123;;841:180;-1:-1:-1;841:180:123:o;1877:254::-;1945:6;1953;2006:2;1994:9;1985:7;1981:23;1977:32;1974:52;;;2022:1;2019;2012:12;1974:52;2045:29;2064:9;2045:29;:::i;:::-;2035:39;2121:2;2106:18;;;;2093:32;;-1:-1:-1;;;1877:254:123:o;2136:127::-;2197:10;2192:3;2188:20;2185:1;2178:31;2228:4;2225:1;2218:15;2252:4;2249:1;2242:15;2268:990;2346:6;2354;2407:2;2395:9;2386:7;2382:23;2378:32;2375:52;;;2423:1;2420;2413:12;2375:52;2459:9;2446:23;2436:33;;2520:2;2509:9;2505:18;2492:32;2543:18;2584:2;2576:6;2573:14;2570:34;;;2600:1;2597;2590:12;2570:34;2638:6;2627:9;2623:22;2613:32;;2683:7;2676:4;2672:2;2668:13;2664:27;2654:55;;2705:1;2702;2695:12;2654:55;2741:2;2728:16;2763:2;2759;2756:10;2753:36;;;2769:18;;:::i;:::-;2844:2;2838:9;2812:2;2898:13;;-1:-1:-1;;2894:22:123;;;2918:2;2890:31;2886:40;2874:53;;;2942:18;;;2962:22;;;2939:46;2936:72;;;2988:18;;:::i;:::-;3028:10;3024:2;3017:22;3063:2;3055:6;3048:18;3103:7;3098:2;3093;3089;3085:11;3081:20;3078:33;3075:53;;;3124:1;3121;3114:12;3075:53;3180:2;3175;3171;3167:11;3162:2;3154:6;3150:15;3137:46;3225:1;3220:2;3215;3207:6;3203:15;3199:24;3192:35;3246:6;3236:16;;;;;;;2268:990;;;;;:::o;3643:277::-;3710:6;3763:2;3751:9;3742:7;3738:23;3734:32;3731:52;;;3779:1;3776;3769:12;3731:52;3811:9;3805:16;3864:5;3857:13;3850:21;3843:5;3840:32;3830:60;;3886:1;3883;3876:12;3830:60;3909:5;3643:277;-1:-1:-1;;;3643:277:123:o;3925:222::-;3990:9;;;4011:10;;;4008:133;;;4063:10;4058:3;4054:20;4051:1;4044:31;4098:4;4095:1;4088:15;4126:4;4123:1;4116:15;4008:133;3925:222;;;;:::o;4152:274::-;-1:-1:-1;;;;;4344:32:123;;;;4326:51;;4408:2;4393:18;;4386:34;4314:2;4299:18;;4152:274::o;4613:414::-;4744:3;4782:6;4776:13;4807:1;4817:129;4831:6;4828:1;4825:13;4817:129;;;4929:4;4913:14;;;4909:25;;4903:32;4890:11;;;4883:53;4846:12;4817:129;;;-1:-1:-1;5001:1:123;4965:16;;4990:13;;;-1:-1:-1;4965:16:123;4613:414;-1:-1:-1;4613:414:123:o","linkReferences":{}},"methodIdentifiers":{"cancelPayment(address,uint256)":"a20dfe6b","commitForPayment(uint256,bytes32)":"483e7aaa","payments(uint256)":"87d81789","redeemPayment(uint256,string)":"f76dac14","reservePayment(address,uint256,uint256,bytes32)":"2a44895e"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.24+commit.e11b9ed9\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"ChatterPayVault__CannotCancelActiveCommit\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ChatterPayVault__CommitmentExpired\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ChatterPayVault__IncorrectPassword\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ChatterPayVault__InvalidCommitmentHash\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ChatterPayVault__InvalidId\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ChatterPayVault__NoBalanceToCancel\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ChatterPayVault__NoBalanceToRedeem\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ChatterPayVault__UnauthorizedCancel\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ChatterPayVault__UnauthorizedRedeemer\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"payer\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"PaymentCancelled\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"commiter\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"PaymentCommitted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"wallet\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"redeemer\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"PaymentRedeemed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"payer\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"PaymentReserved\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_erc20\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_id\",\"type\":\"uint256\"}],\"name\":\"cancelPayment\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_id\",\"type\":\"uint256\"},{\"internalType\":\"bytes32\",\"name\":\"_commitmentHash\",\"type\":\"bytes32\"}],\"name\":\"commitForPayment\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"}],\"name\":\"payments\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"wallet\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"balance\",\"type\":\"uint256\"},{\"internalType\":\"bytes32\",\"name\":\"passwordHash\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"redeemer\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"isReserved\",\"type\":\"bool\"},{\"internalType\":\"bool\",\"name\":\"isCommited\",\"type\":\"bool\"},{\"internalType\":\"bool\",\"name\":\"isRedeemed\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"commitTimestamp\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_id\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"_password\",\"type\":\"string\"}],\"name\":\"redeemPayment\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_erc20\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_id\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"},{\"internalType\":\"bytes32\",\"name\":\"_passwordHash\",\"type\":\"bytes32\"}],\"name\":\"reservePayment\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Utilizes ERC20 tokens and includes commitment expiration for added security.\",\"kind\":\"dev\",\"methods\":{\"cancelPayment(address,uint256)\":{\"custom:events\":\"Emits a `PaymentCancelled` event on success.\",\"custom:reverts\":\"ChatterPayVault__UnauthorizedCancel if the caller is not the payer.ChatterPayVault__NoBalanceToCancel if the payment balance is zero.ChatterPayVault__CannotCancelActiveCommit if the commitment has not expired.\",\"details\":\"Allows cancellation if no active commitment exists or if the commitment has expired.\",\"params\":{\"_erc20\":\"The address of the ERC20 token used in the payment.\",\"_id\":\"The unique identifier for the payment.\"}},\"commitForPayment(uint256,bytes32)\":{\"custom:events\":\"Emits a `PaymentCommitted` event on success.\",\"custom:reverts\":\"ChatterPayVault__InvalidId if the payment is already committed or redeemed.ChatterPayVault__InvalidCommitmentHash if the commitment hash does not match.\",\"details\":\"Updates the payment's redeemer and timestamp, locking it for redemption.\",\"params\":{\"_commitmentHash\":\"The keccak256 hash of the password used for commitment verification.\",\"_id\":\"The unique identifier for the payment.\"}},\"redeemPayment(uint256,string)\":{\"custom:events\":\"Emits a `PaymentRedeemed` event on success.\",\"custom:reverts\":\"ChatterPayVault__InvalidId if the payment is not committed or already redeemed.ChatterPayVault__UnauthorizedRedeemer if the caller is not the redeemer.ChatterPayVault__NoBalanceToRedeem if the payment balance is zero.ChatterPayVault__CommitmentExpired if the commitment timeout has elapsed.ChatterPayVault__IncorrectPassword if the password does not match the hash.\",\"details\":\"Transfers the payment's balance to the redeemer after verifying the password.\",\"params\":{\"_id\":\"The unique identifier for the payment.\",\"_password\":\"The password corresponding to the payment's password hash.\"}},\"reservePayment(address,uint256,uint256,bytes32)\":{\"custom:events\":\"Emits a `PaymentReserved` event on success.\",\"custom:reverts\":\"ChatterPayVault__InvalidId if the payment ID is already reserved or redeemed.\",\"details\":\"Transfers the specified amount of tokens from the payer to the contract.\",\"params\":{\"_amount\":\"The amount of tokens to reserve.\",\"_erc20\":\"The address of the ERC20 token to be used.\",\"_id\":\"The unique identifier for the payment.\",\"_passwordHash\":\"The keccak256 hash of the password for payment redemption.\"}}},\"title\":\"ChatterPayVault\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"cancelPayment(address,uint256)\":{\"notice\":\"Cancels a reserved payment and returns the funds to the payer.\"},\"commitForPayment(uint256,bytes32)\":{\"notice\":\"Commits a redeemer for a reserved payment by providing the correct commitment hash.\"},\"redeemPayment(uint256,string)\":{\"notice\":\"Redeems a committed payment by providing the correct password.\"},\"reservePayment(address,uint256,uint256,bytes32)\":{\"notice\":\"Reserves a payment with a specified ERC20 token, amount, and password hash.\"}},\"notice\":\"A vault contract for reserving, committing, redeeming, and canceling payments with password-protected commitments.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/ChatterPayVault.sol\":\"ChatterPayVault\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":50},\"remappings\":[\":@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/\",\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":account-abstraction/=lib/account-abstraction/contracts/\",\":api3-contracts/=lib/api3-contracts/contracts/\",\":ds-test/=lib/solidity-stringutils/lib/ds-test/src/\",\":entry-point-v6/=lib/entry-point-v6/\",\":erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":foundry-devops/=lib/foundry-devops/\",\":halmos-cheatcodes/=lib/openzeppelin-contracts/lib/halmos-cheatcodes/src/\",\":openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin-foundry-upgrades/=lib/openzeppelin-foundry-upgrades/src/\",\":solidity-stringutils/=lib/solidity-stringutils/\"]},\"sources\":{\"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0xe06a3f08a987af6ad2e1c1e774405d4fe08f1694b67517438b467cecf0da0ef7\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://df6f0c459663c9858b6cba2cda1d14a7d05a985bed6d2de72bd8e78c25ee79db\",\"dweb:/ipfs/QmeTTxZ7qVk9rjEv2R4CpCwdf8UMCcRqDNMvzNxHc3Fnn9\"]},\"src/ChatterPayVault.sol\":{\"keccak256\":\"0xf5e2ef220b69ff943d3ec33255ca7a60732a4b7efb3df0cb88f668f7664f4ce5\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://2596845d643d857ed3082d15ed3cf2ead10b02fbaec5a741f82c1f77cadb45e3\",\"dweb:/ipfs/QmZtYATYdVTXBwUBZHn4ZuywEk5GUdbCqXe1vwVPBqmpDc\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.24+commit.e11b9ed9"},"language":"Solidity","output":{"abi":[{"inputs":[],"type":"error","name":"ChatterPayVault__CannotCancelActiveCommit"},{"inputs":[],"type":"error","name":"ChatterPayVault__CommitmentExpired"},{"inputs":[],"type":"error","name":"ChatterPayVault__IncorrectPassword"},{"inputs":[],"type":"error","name":"ChatterPayVault__InvalidCommitmentHash"},{"inputs":[],"type":"error","name":"ChatterPayVault__InvalidId"},{"inputs":[],"type":"error","name":"ChatterPayVault__NoBalanceToCancel"},{"inputs":[],"type":"error","name":"ChatterPayVault__NoBalanceToRedeem"},{"inputs":[],"type":"error","name":"ChatterPayVault__UnauthorizedCancel"},{"inputs":[],"type":"error","name":"ChatterPayVault__UnauthorizedRedeemer"},{"inputs":[{"internalType":"address","name":"payer","type":"address","indexed":true},{"internalType":"address","name":"token","type":"address","indexed":true},{"internalType":"uint256","name":"amount","type":"uint256","indexed":false}],"type":"event","name":"PaymentCancelled","anonymous":false},{"inputs":[{"internalType":"address","name":"commiter","type":"address","indexed":true},{"internalType":"address","name":"token","type":"address","indexed":true},{"internalType":"uint256","name":"amount","type":"uint256","indexed":true}],"type":"event","name":"PaymentCommitted","anonymous":false},{"inputs":[{"internalType":"address","name":"wallet","type":"address","indexed":true},{"internalType":"address","name":"token","type":"address","indexed":true},{"internalType":"address","name":"redeemer","type":"address","indexed":false},{"internalType":"uint256","name":"amount","type":"uint256","indexed":false}],"type":"event","name":"PaymentRedeemed","anonymous":false},{"inputs":[{"internalType":"address","name":"payer","type":"address","indexed":true},{"internalType":"address","name":"token","type":"address","indexed":true},{"internalType":"uint256","name":"amount","type":"uint256","indexed":true}],"type":"event","name":"PaymentReserved","anonymous":false},{"inputs":[{"internalType":"address","name":"_erc20","type":"address"},{"internalType":"uint256","name":"_id","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"cancelPayment"},{"inputs":[{"internalType":"uint256","name":"_id","type":"uint256"},{"internalType":"bytes32","name":"_commitmentHash","type":"bytes32"}],"stateMutability":"nonpayable","type":"function","name":"commitForPayment"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"stateMutability":"view","type":"function","name":"payments","outputs":[{"internalType":"address","name":"wallet","type":"address"},{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"balance","type":"uint256"},{"internalType":"bytes32","name":"passwordHash","type":"bytes32"},{"internalType":"address","name":"redeemer","type":"address"},{"internalType":"bool","name":"isReserved","type":"bool"},{"internalType":"bool","name":"isCommited","type":"bool"},{"internalType":"bool","name":"isRedeemed","type":"bool"},{"internalType":"uint256","name":"commitTimestamp","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"_id","type":"uint256"},{"internalType":"string","name":"_password","type":"string"}],"stateMutability":"nonpayable","type":"function","name":"redeemPayment"},{"inputs":[{"internalType":"address","name":"_erc20","type":"address"},{"internalType":"uint256","name":"_id","type":"uint256"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"bytes32","name":"_passwordHash","type":"bytes32"}],"stateMutability":"nonpayable","type":"function","name":"reservePayment"}],"devdoc":{"kind":"dev","methods":{"cancelPayment(address,uint256)":{"custom:events":"Emits a `PaymentCancelled` event on success.","custom:reverts":"ChatterPayVault__UnauthorizedCancel if the caller is not the payer.ChatterPayVault__NoBalanceToCancel if the payment balance is zero.ChatterPayVault__CannotCancelActiveCommit if the commitment has not expired.","details":"Allows cancellation if no active commitment exists or if the commitment has expired.","params":{"_erc20":"The address of the ERC20 token used in the payment.","_id":"The unique identifier for the payment."}},"commitForPayment(uint256,bytes32)":{"custom:events":"Emits a `PaymentCommitted` event on success.","custom:reverts":"ChatterPayVault__InvalidId if the payment is already committed or redeemed.ChatterPayVault__InvalidCommitmentHash if the commitment hash does not match.","details":"Updates the payment's redeemer and timestamp, locking it for redemption.","params":{"_commitmentHash":"The keccak256 hash of the password used for commitment verification.","_id":"The unique identifier for the payment."}},"redeemPayment(uint256,string)":{"custom:events":"Emits a `PaymentRedeemed` event on success.","custom:reverts":"ChatterPayVault__InvalidId if the payment is not committed or already redeemed.ChatterPayVault__UnauthorizedRedeemer if the caller is not the redeemer.ChatterPayVault__NoBalanceToRedeem if the payment balance is zero.ChatterPayVault__CommitmentExpired if the commitment timeout has elapsed.ChatterPayVault__IncorrectPassword if the password does not match the hash.","details":"Transfers the payment's balance to the redeemer after verifying the password.","params":{"_id":"The unique identifier for the payment.","_password":"The password corresponding to the payment's password hash."}},"reservePayment(address,uint256,uint256,bytes32)":{"custom:events":"Emits a `PaymentReserved` event on success.","custom:reverts":"ChatterPayVault__InvalidId if the payment ID is already reserved or redeemed.","details":"Transfers the specified amount of tokens from the payer to the contract.","params":{"_amount":"The amount of tokens to reserve.","_erc20":"The address of the ERC20 token to be used.","_id":"The unique identifier for the payment.","_passwordHash":"The keccak256 hash of the password for payment redemption."}}},"version":1},"userdoc":{"kind":"user","methods":{"cancelPayment(address,uint256)":{"notice":"Cancels a reserved payment and returns the funds to the payer."},"commitForPayment(uint256,bytes32)":{"notice":"Commits a redeemer for a reserved payment by providing the correct commitment hash."},"redeemPayment(uint256,string)":{"notice":"Redeems a committed payment by providing the correct password."},"reservePayment(address,uint256,uint256,bytes32)":{"notice":"Reserves a payment with a specified ERC20 token, amount, and password hash."}},"version":1}},"settings":{"remappings":["@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/","@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/","account-abstraction/=lib/account-abstraction/contracts/","api3-contracts/=lib/api3-contracts/contracts/","ds-test/=lib/solidity-stringutils/lib/ds-test/src/","entry-point-v6/=lib/entry-point-v6/","erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","foundry-devops/=lib/foundry-devops/","halmos-cheatcodes/=lib/openzeppelin-contracts/lib/halmos-cheatcodes/src/","openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin-foundry-upgrades/=lib/openzeppelin-foundry-upgrades/src/","solidity-stringutils/=lib/solidity-stringutils/"],"optimizer":{"enabled":true,"runs":50},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/ChatterPayVault.sol":"ChatterPayVault"},"evmVersion":"cancun","libraries":{}},"sources":{"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol":{"keccak256":"0xe06a3f08a987af6ad2e1c1e774405d4fe08f1694b67517438b467cecf0da0ef7","urls":["bzz-raw://df6f0c459663c9858b6cba2cda1d14a7d05a985bed6d2de72bd8e78c25ee79db","dweb:/ipfs/QmeTTxZ7qVk9rjEv2R4CpCwdf8UMCcRqDNMvzNxHc3Fnn9"],"license":"MIT"},"src/ChatterPayVault.sol":{"keccak256":"0xf5e2ef220b69ff943d3ec33255ca7a60732a4b7efb3df0cb88f668f7664f4ce5","urls":["bzz-raw://2596845d643d857ed3082d15ed3cf2ead10b02fbaec5a741f82c1f77cadb45e3","dweb:/ipfs/QmZtYATYdVTXBwUBZHn4ZuywEk5GUdbCqXe1vwVPBqmpDc"],"license":"MIT"}},"version":1},"storageLayout":{"storage":[{"astId":65743,"contract":"src/ChatterPayVault.sol:ChatterPayVault","label":"payments","offset":0,"slot":"0","type":"t_mapping(t_uint256,t_struct(Payment)65728_storage)"}],"types":{"t_address":{"encoding":"inplace","label":"address","numberOfBytes":"20"},"t_bool":{"encoding":"inplace","label":"bool","numberOfBytes":"1"},"t_bytes32":{"encoding":"inplace","label":"bytes32","numberOfBytes":"32"},"t_mapping(t_uint256,t_struct(Payment)65728_storage)":{"encoding":"mapping","key":"t_uint256","label":"mapping(uint256 => struct ChatterPayVault.Payment)","numberOfBytes":"32","value":"t_struct(Payment)65728_storage"},"t_struct(Payment)65728_storage":{"encoding":"inplace","label":"struct ChatterPayVault.Payment","numberOfBytes":"192","members":[{"astId":65711,"contract":"src/ChatterPayVault.sol:ChatterPayVault","label":"wallet","offset":0,"slot":"0","type":"t_address"},{"astId":65713,"contract":"src/ChatterPayVault.sol:ChatterPayVault","label":"token","offset":0,"slot":"1","type":"t_address"},{"astId":65715,"contract":"src/ChatterPayVault.sol:ChatterPayVault","label":"balance","offset":0,"slot":"2","type":"t_uint256"},{"astId":65717,"contract":"src/ChatterPayVault.sol:ChatterPayVault","label":"passwordHash","offset":0,"slot":"3","type":"t_bytes32"},{"astId":65719,"contract":"src/ChatterPayVault.sol:ChatterPayVault","label":"redeemer","offset":0,"slot":"4","type":"t_address"},{"astId":65721,"contract":"src/ChatterPayVault.sol:ChatterPayVault","label":"isReserved","offset":20,"slot":"4","type":"t_bool"},{"astId":65723,"contract":"src/ChatterPayVault.sol:ChatterPayVault","label":"isCommited","offset":21,"slot":"4","type":"t_bool"},{"astId":65725,"contract":"src/ChatterPayVault.sol:ChatterPayVault","label":"isRedeemed","offset":22,"slot":"4","type":"t_bool"},{"astId":65727,"contract":"src/ChatterPayVault.sol:ChatterPayVault","label":"commitTimestamp","offset":0,"slot":"5","type":"t_uint256"}]},"t_uint256":{"encoding":"inplace","label":"uint256","numberOfBytes":"32"}}},"ast":{"absolutePath":"src/ChatterPayVault.sol","id":66125,"exportedSymbols":{"ChatterPayVault":[66124],"ChatterPayVault__CannotCancelActiveCommit":[65702],"ChatterPayVault__CommitmentAlreadySet":[65686],"ChatterPayVault__CommitmentExpired":[65698],"ChatterPayVault__IncorrectPassword":[65690],"ChatterPayVault__InvalidCommitment":[65696],"ChatterPayVault__InvalidCommitmentHash":[65706],"ChatterPayVault__InvalidId":[65704],"ChatterPayVault__NoBalanceToCancel":[65700],"ChatterPayVault__NoBalanceToRedeem":[65688],"ChatterPayVault__NoCommitmentFound":[65692],"ChatterPayVault__UnauthorizedCancel":[65708],"ChatterPayVault__UnauthorizedRedeemer":[65694],"IERC20":[48487]},"nodeType":"SourceUnit","src":"33:8079:109","nodes":[{"id":65682,"nodeType":"PragmaDirective","src":"33:24:109","nodes":[],"literals":["solidity","^","0.8",".24"]},{"id":65684,"nodeType":"ImportDirective","src":"59:70:109","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol","file":"@openzeppelin/contracts/token/ERC20/IERC20.sol","nameLocation":"-1:-1:-1","scope":66125,"sourceUnit":48488,"symbolAliases":[{"foreign":{"id":65683,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":48487,"src":"67:6:109","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":65686,"nodeType":"ErrorDefinition","src":"131:46:109","nodes":[],"errorSelector":"a5a477ce","name":"ChatterPayVault__CommitmentAlreadySet","nameLocation":"137:37:109","parameters":{"id":65685,"nodeType":"ParameterList","parameters":[],"src":"174:2:109"}},{"id":65688,"nodeType":"ErrorDefinition","src":"178:43:109","nodes":[],"errorSelector":"8c4064cb","name":"ChatterPayVault__NoBalanceToRedeem","nameLocation":"184:34:109","parameters":{"id":65687,"nodeType":"ParameterList","parameters":[],"src":"218:2:109"}},{"id":65690,"nodeType":"ErrorDefinition","src":"222:43:109","nodes":[],"errorSelector":"1f845198","name":"ChatterPayVault__IncorrectPassword","nameLocation":"228:34:109","parameters":{"id":65689,"nodeType":"ParameterList","parameters":[],"src":"262:2:109"}},{"id":65692,"nodeType":"ErrorDefinition","src":"266:43:109","nodes":[],"errorSelector":"782afd91","name":"ChatterPayVault__NoCommitmentFound","nameLocation":"272:34:109","parameters":{"id":65691,"nodeType":"ParameterList","parameters":[],"src":"306:2:109"}},{"id":65694,"nodeType":"ErrorDefinition","src":"310:46:109","nodes":[],"errorSelector":"5ff5f459","name":"ChatterPayVault__UnauthorizedRedeemer","nameLocation":"316:37:109","parameters":{"id":65693,"nodeType":"ParameterList","parameters":[],"src":"353:2:109"}},{"id":65696,"nodeType":"ErrorDefinition","src":"357:43:109","nodes":[],"errorSelector":"d088a593","name":"ChatterPayVault__InvalidCommitment","nameLocation":"363:34:109","parameters":{"id":65695,"nodeType":"ParameterList","parameters":[],"src":"397:2:109"}},{"id":65698,"nodeType":"ErrorDefinition","src":"401:43:109","nodes":[],"errorSelector":"99bc3517","name":"ChatterPayVault__CommitmentExpired","nameLocation":"407:34:109","parameters":{"id":65697,"nodeType":"ParameterList","parameters":[],"src":"441:2:109"}},{"id":65700,"nodeType":"ErrorDefinition","src":"445:43:109","nodes":[],"errorSelector":"4ad71bcb","name":"ChatterPayVault__NoBalanceToCancel","nameLocation":"451:34:109","parameters":{"id":65699,"nodeType":"ParameterList","parameters":[],"src":"485:2:109"}},{"id":65702,"nodeType":"ErrorDefinition","src":"489:50:109","nodes":[],"errorSelector":"d851973b","name":"ChatterPayVault__CannotCancelActiveCommit","nameLocation":"495:41:109","parameters":{"id":65701,"nodeType":"ParameterList","parameters":[],"src":"536:2:109"}},{"id":65704,"nodeType":"ErrorDefinition","src":"540:35:109","nodes":[],"errorSelector":"794015e5","name":"ChatterPayVault__InvalidId","nameLocation":"546:26:109","parameters":{"id":65703,"nodeType":"ParameterList","parameters":[],"src":"572:2:109"}},{"id":65706,"nodeType":"ErrorDefinition","src":"576:47:109","nodes":[],"errorSelector":"92f8d0fd","name":"ChatterPayVault__InvalidCommitmentHash","nameLocation":"582:38:109","parameters":{"id":65705,"nodeType":"ParameterList","parameters":[],"src":"620:2:109"}},{"id":65708,"nodeType":"ErrorDefinition","src":"624:44:109","nodes":[],"errorSelector":"7aafd3f4","name":"ChatterPayVault__UnauthorizedCancel","nameLocation":"630:35:109","parameters":{"id":65707,"nodeType":"ParameterList","parameters":[],"src":"665:2:109"}},{"id":66124,"nodeType":"ContractDefinition","src":"915:7196:109","nodes":[{"id":65728,"nodeType":"StructDefinition","src":"946:258:109","nodes":[],"canonicalName":"ChatterPayVault.Payment","members":[{"constant":false,"id":65711,"mutability":"mutable","name":"wallet","nameLocation":"979:6:109","nodeType":"VariableDeclaration","scope":65728,"src":"971:14:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65710,"name":"address","nodeType":"ElementaryTypeName","src":"971:7:109","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":65713,"mutability":"mutable","name":"token","nameLocation":"1003:5:109","nodeType":"VariableDeclaration","scope":65728,"src":"995:13:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65712,"name":"address","nodeType":"ElementaryTypeName","src":"995:7:109","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":65715,"mutability":"mutable","name":"balance","nameLocation":"1026:7:109","nodeType":"VariableDeclaration","scope":65728,"src":"1018:15:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65714,"name":"uint256","nodeType":"ElementaryTypeName","src":"1018:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":65717,"mutability":"mutable","name":"passwordHash","nameLocation":"1051:12:109","nodeType":"VariableDeclaration","scope":65728,"src":"1043:20:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":65716,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1043:7:109","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"},{"constant":false,"id":65719,"mutability":"mutable","name":"redeemer","nameLocation":"1081:8:109","nodeType":"VariableDeclaration","scope":65728,"src":"1073:16:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65718,"name":"address","nodeType":"ElementaryTypeName","src":"1073:7:109","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":65721,"mutability":"mutable","name":"isReserved","nameLocation":"1104:10:109","nodeType":"VariableDeclaration","scope":65728,"src":"1099:15:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":65720,"name":"bool","nodeType":"ElementaryTypeName","src":"1099:4:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":65723,"mutability":"mutable","name":"isCommited","nameLocation":"1129:10:109","nodeType":"VariableDeclaration","scope":65728,"src":"1124:15:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":65722,"name":"bool","nodeType":"ElementaryTypeName","src":"1124:4:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":65725,"mutability":"mutable","name":"isRedeemed","nameLocation":"1154:10:109","nodeType":"VariableDeclaration","scope":65728,"src":"1149:15:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":65724,"name":"bool","nodeType":"ElementaryTypeName","src":"1149:4:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":65727,"mutability":"mutable","name":"commitTimestamp","nameLocation":"1182:15:109","nodeType":"VariableDeclaration","scope":65728,"src":"1174:23:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65726,"name":"uint256","nodeType":"ElementaryTypeName","src":"1174:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"name":"Payment","nameLocation":"953:7:109","scope":66124,"visibility":"public"},{"id":65735,"nodeType":"StructDefinition","src":"1210:106:109","nodes":[],"canonicalName":"ChatterPayVault.Commit","members":[{"constant":false,"id":65730,"mutability":"mutable","name":"commitmentHash","nameLocation":"1242:14:109","nodeType":"VariableDeclaration","scope":65735,"src":"1234:22:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":65729,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1234:7:109","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"},{"constant":false,"id":65732,"mutability":"mutable","name":"timestamp","nameLocation":"1274:9:109","nodeType":"VariableDeclaration","scope":65735,"src":"1266:17:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65731,"name":"uint256","nodeType":"ElementaryTypeName","src":"1266:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":65734,"mutability":"mutable","name":"redeemer","nameLocation":"1301:8:109","nodeType":"VariableDeclaration","scope":65735,"src":"1293:16:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65733,"name":"address","nodeType":"ElementaryTypeName","src":"1293:7:109","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"name":"Commit","nameLocation":"1217:6:109","scope":66124,"visibility":"public"},{"id":65738,"nodeType":"VariableDeclaration","src":"1322:41:109","nodes":[],"constant":true,"mutability":"constant","name":"COMMIT_TIMEOUT","nameLocation":"1339:14:109","scope":66124,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65736,"name":"uint256","nodeType":"ElementaryTypeName","src":"1322:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"31","id":65737,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1356:7:109","subdenomination":"hours","typeDescriptions":{"typeIdentifier":"t_rational_3600_by_1","typeString":"int_const 3600"},"value":"1"},"visibility":"internal"},{"id":65743,"nodeType":"VariableDeclaration","src":"1370:46:109","nodes":[],"constant":false,"functionSelector":"87d81789","mutability":"mutable","name":"payments","nameLocation":"1408:8:109","scope":66124,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Payment_$65728_storage_$","typeString":"mapping(uint256 => struct ChatterPayVault.Payment)"},"typeName":{"id":65742,"keyName":"id","keyNameLocation":"1386:2:109","keyType":{"id":65739,"name":"uint256","nodeType":"ElementaryTypeName","src":"1378:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Mapping","src":"1370:30:109","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Payment_$65728_storage_$","typeString":"mapping(uint256 => struct ChatterPayVault.Payment)"},"valueName":"","valueNameLocation":"-1:-1:-1","valueType":{"id":65741,"nodeType":"UserDefinedTypeName","pathNode":{"id":65740,"name":"Payment","nameLocations":["1392:7:109"],"nodeType":"IdentifierPath","referencedDeclaration":65728,"src":"1392:7:109"},"referencedDeclaration":65728,"src":"1392:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment"}}},"visibility":"public"},{"id":65751,"nodeType":"EventDefinition","src":"1423:122:109","nodes":[],"anonymous":false,"eventSelector":"b74b7c7ca42c663ff8f674aa85c6a816f6f9b3e3234f691d63e151e10caf8e82","name":"PaymentReserved","nameLocation":"1429:15:109","parameters":{"id":65750,"nodeType":"ParameterList","parameters":[{"constant":false,"id":65745,"indexed":true,"mutability":"mutable","name":"payer","nameLocation":"1470:5:109","nodeType":"VariableDeclaration","scope":65751,"src":"1454:21:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65744,"name":"address","nodeType":"ElementaryTypeName","src":"1454:7:109","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":65747,"indexed":true,"mutability":"mutable","name":"token","nameLocation":"1501:5:109","nodeType":"VariableDeclaration","scope":65751,"src":"1485:21:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65746,"name":"address","nodeType":"ElementaryTypeName","src":"1485:7:109","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":65749,"indexed":true,"mutability":"mutable","name":"amount","nameLocation":"1532:6:109","nodeType":"VariableDeclaration","scope":65751,"src":"1516:22:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65748,"name":"uint256","nodeType":"ElementaryTypeName","src":"1516:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1444:100:109"}},{"id":65759,"nodeType":"EventDefinition","src":"1550:126:109","nodes":[],"anonymous":false,"eventSelector":"3e80db7390ae4ef4b7beb331e5873eb085e244068fa3c537c1161f73be75b09a","name":"PaymentCommitted","nameLocation":"1556:16:109","parameters":{"id":65758,"nodeType":"ParameterList","parameters":[{"constant":false,"id":65753,"indexed":true,"mutability":"mutable","name":"commiter","nameLocation":"1598:8:109","nodeType":"VariableDeclaration","scope":65759,"src":"1582:24:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65752,"name":"address","nodeType":"ElementaryTypeName","src":"1582:7:109","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":65755,"indexed":true,"mutability":"mutable","name":"token","nameLocation":"1632:5:109","nodeType":"VariableDeclaration","scope":65759,"src":"1616:21:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65754,"name":"address","nodeType":"ElementaryTypeName","src":"1616:7:109","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":65757,"indexed":true,"mutability":"mutable","name":"amount","nameLocation":"1663:6:109","nodeType":"VariableDeclaration","scope":65759,"src":"1647:22:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65756,"name":"uint256","nodeType":"ElementaryTypeName","src":"1647:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1572:103:109"}},{"id":65769,"nodeType":"EventDefinition","src":"1681:141:109","nodes":[],"anonymous":false,"eventSelector":"6f1500ba3043953f72e661f2fe4b50f929a18cb932e3ef2671a9e9c7a4330507","name":"PaymentRedeemed","nameLocation":"1687:15:109","parameters":{"id":65768,"nodeType":"ParameterList","parameters":[{"constant":false,"id":65761,"indexed":true,"mutability":"mutable","name":"wallet","nameLocation":"1728:6:109","nodeType":"VariableDeclaration","scope":65769,"src":"1712:22:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65760,"name":"address","nodeType":"ElementaryTypeName","src":"1712:7:109","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":65763,"indexed":true,"mutability":"mutable","name":"token","nameLocation":"1760:5:109","nodeType":"VariableDeclaration","scope":65769,"src":"1744:21:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65762,"name":"address","nodeType":"ElementaryTypeName","src":"1744:7:109","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":65765,"indexed":false,"mutability":"mutable","name":"redeemer","nameLocation":"1783:8:109","nodeType":"VariableDeclaration","scope":65769,"src":"1775:16:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65764,"name":"address","nodeType":"ElementaryTypeName","src":"1775:7:109","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":65767,"indexed":false,"mutability":"mutable","name":"amount","nameLocation":"1809:6:109","nodeType":"VariableDeclaration","scope":65769,"src":"1801:14:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65766,"name":"uint256","nodeType":"ElementaryTypeName","src":"1801:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1702:119:109"}},{"id":65777,"nodeType":"EventDefinition","src":"1827:115:109","nodes":[],"anonymous":false,"eventSelector":"76c53469c368a39727f3ece1c151861abb04b9daf5c17d54ed279c3de4ddf765","name":"PaymentCancelled","nameLocation":"1833:16:109","parameters":{"id":65776,"nodeType":"ParameterList","parameters":[{"constant":false,"id":65771,"indexed":true,"mutability":"mutable","name":"payer","nameLocation":"1875:5:109","nodeType":"VariableDeclaration","scope":65777,"src":"1859:21:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65770,"name":"address","nodeType":"ElementaryTypeName","src":"1859:7:109","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":65773,"indexed":true,"mutability":"mutable","name":"token","nameLocation":"1906:5:109","nodeType":"VariableDeclaration","scope":65777,"src":"1890:21:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65772,"name":"address","nodeType":"ElementaryTypeName","src":"1890:7:109","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":65775,"indexed":false,"mutability":"mutable","name":"amount","nameLocation":"1929:6:109","nodeType":"VariableDeclaration","scope":65777,"src":"1921:14:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65774,"name":"uint256","nodeType":"ElementaryTypeName","src":"1921:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1849:92:109"}},{"id":65843,"nodeType":"FunctionDefinition","src":"2570:725:109","nodes":[],"body":{"id":65842,"nodeType":"Block","src":"2708:587:109","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":65797,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"baseExpression":{"id":65789,"name":"payments","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65743,"src":"2722:8:109","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Payment_$65728_storage_$","typeString":"mapping(uint256 => struct ChatterPayVault.Payment storage ref)"}},"id":65791,"indexExpression":{"id":65790,"name":"_id","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65782,"src":"2731:3:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"2722:13:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage","typeString":"struct ChatterPayVault.Payment storage ref"}},"id":65792,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"2736:10:109","memberName":"isReserved","nodeType":"MemberAccess","referencedDeclaration":65721,"src":"2722:24:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"expression":{"baseExpression":{"id":65793,"name":"payments","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65743,"src":"2750:8:109","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Payment_$65728_storage_$","typeString":"mapping(uint256 => struct ChatterPayVault.Payment storage ref)"}},"id":65795,"indexExpression":{"id":65794,"name":"_id","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65782,"src":"2759:3:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"2750:13:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage","typeString":"struct ChatterPayVault.Payment storage ref"}},"id":65796,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"2764:10:109","memberName":"isRedeemed","nodeType":"MemberAccess","referencedDeclaration":65725,"src":"2750:24:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"2722:52:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":65801,"nodeType":"IfStatement","src":"2718:105:109","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":65798,"name":"ChatterPayVault__InvalidId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65704,"src":"2795:26:109","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":65799,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2795:28:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":65800,"nodeType":"RevertStatement","src":"2788:35:109"}},{"expression":{"id":65820,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"id":65802,"name":"payments","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65743,"src":"2833:8:109","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Payment_$65728_storage_$","typeString":"mapping(uint256 => struct ChatterPayVault.Payment storage ref)"}},"id":65804,"indexExpression":{"id":65803,"name":"_id","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65782,"src":"2842:3:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"2833:13:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage","typeString":"struct ChatterPayVault.Payment storage ref"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"expression":{"id":65806,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"2879:3:109","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":65807,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2883:6:109","memberName":"sender","nodeType":"MemberAccess","src":"2879:10:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":65808,"name":"_erc20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65780,"src":"2910:6:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":65809,"name":"_amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65784,"src":"2939:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":65810,"name":"_passwordHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65786,"src":"2974:13:109","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"arguments":[{"hexValue":"30","id":65813,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3019:1:109","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":65812,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3011:7:109","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":65811,"name":"address","nodeType":"ElementaryTypeName","src":"3011:7:109","typeDescriptions":{}}},"id":65814,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3011:10:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"hexValue":"74727565","id":65815,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"3047:4:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},{"hexValue":"66616c7365","id":65816,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"3077:5:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},{"hexValue":"66616c7365","id":65817,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"3108:5:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},{"hexValue":"30","id":65818,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3144:1:109","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":65805,"name":"Payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65728,"src":"2849:7:109","typeDescriptions":{"typeIdentifier":"t_type$_t_struct$_Payment_$65728_storage_ptr_$","typeString":"type(struct ChatterPayVault.Payment storage pointer)"}},"id":65819,"isConstant":false,"isLValue":false,"isPure":false,"kind":"structConstructorCall","lValueRequested":false,"nameLocations":["2871:6:109","2903:5:109","2930:7:109","2960:12:109","3001:8:109","3035:10:109","3065:10:109","3096:10:109","3127:15:109"],"names":["wallet","token","balance","passwordHash","redeemer","isReserved","isCommited","isRedeemed","commitTimestamp"],"nodeType":"FunctionCall","src":"2849:307:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_memory_ptr","typeString":"struct ChatterPayVault.Payment memory"}},"src":"2833:323:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage","typeString":"struct ChatterPayVault.Payment storage ref"}},"id":65821,"nodeType":"ExpressionStatement","src":"2833:323:109"},{"expression":{"arguments":[{"expression":{"id":65826,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"3194:3:109","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":65827,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3198:6:109","memberName":"sender","nodeType":"MemberAccess","src":"3194:10:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"arguments":[{"id":65830,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"3214:4:109","typeDescriptions":{"typeIdentifier":"t_contract$_ChatterPayVault_$66124","typeString":"contract ChatterPayVault"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_ChatterPayVault_$66124","typeString":"contract ChatterPayVault"}],"id":65829,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3206:7:109","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":65828,"name":"address","nodeType":"ElementaryTypeName","src":"3206:7:109","typeDescriptions":{}}},"id":65831,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3206:13:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":65832,"name":"_amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65784,"src":"3221:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":65823,"name":"_erc20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65780,"src":"3173:6:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":65822,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":48487,"src":"3166:6:109","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$48487_$","typeString":"type(contract IERC20)"}},"id":65824,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3166:14:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$48487","typeString":"contract IERC20"}},"id":65825,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3181:12:109","memberName":"transferFrom","nodeType":"MemberAccess","referencedDeclaration":48486,"src":"3166:27:109","typeDescriptions":{"typeIdentifier":"t_function_external_nonpayable$_t_address_$_t_address_$_t_uint256_$returns$_t_bool_$","typeString":"function (address,address,uint256) external returns (bool)"}},"id":65833,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3166:63:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":65834,"nodeType":"ExpressionStatement","src":"3166:63:109"},{"eventCall":{"arguments":[{"expression":{"id":65836,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"3260:3:109","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":65837,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3264:6:109","memberName":"sender","nodeType":"MemberAccess","src":"3260:10:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":65838,"name":"_erc20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65780,"src":"3272:6:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":65839,"name":"_amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65784,"src":"3280:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":65835,"name":"PaymentReserved","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65751,"src":"3244:15:109","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,address,uint256)"}},"id":65840,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3244:44:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":65841,"nodeType":"EmitStatement","src":"3239:49:109"}]},"documentation":{"id":65778,"nodeType":"StructuredDocumentation","src":"1948:617:109","text":" @notice Reserves a payment with a specified ERC20 token, amount, and password hash.\n @dev Transfers the specified amount of tokens from the payer to the contract.\n @param _erc20 The address of the ERC20 token to be used.\n @param _id The unique identifier for the payment.\n @param _amount The amount of tokens to reserve.\n @param _passwordHash The keccak256 hash of the password for payment redemption.\n @custom:events Emits a `PaymentReserved` event on success.\n @custom:reverts ChatterPayVault__InvalidId if the payment ID is already reserved or redeemed."},"functionSelector":"2a44895e","implemented":true,"kind":"function","modifiers":[],"name":"reservePayment","nameLocation":"2579:14:109","parameters":{"id":65787,"nodeType":"ParameterList","parameters":[{"constant":false,"id":65780,"mutability":"mutable","name":"_erc20","nameLocation":"2611:6:109","nodeType":"VariableDeclaration","scope":65843,"src":"2603:14:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":65779,"name":"address","nodeType":"ElementaryTypeName","src":"2603:7:109","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":65782,"mutability":"mutable","name":"_id","nameLocation":"2635:3:109","nodeType":"VariableDeclaration","scope":65843,"src":"2627:11:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65781,"name":"uint256","nodeType":"ElementaryTypeName","src":"2627:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":65784,"mutability":"mutable","name":"_amount","nameLocation":"2656:7:109","nodeType":"VariableDeclaration","scope":65843,"src":"2648:15:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65783,"name":"uint256","nodeType":"ElementaryTypeName","src":"2648:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":65786,"mutability":"mutable","name":"_passwordHash","nameLocation":"2681:13:109","nodeType":"VariableDeclaration","scope":65843,"src":"2673:21:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":65785,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2673:7:109","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"}],"src":"2593:107:109"},"returnParameters":{"id":65788,"nodeType":"ParameterList","parameters":[],"src":"2708:0:109"},"scope":66124,"stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"id":65911,"nodeType":"FunctionDefinition","src":"3924:589:109","nodes":[],"body":{"id":65910,"nodeType":"Block","src":"3995:518:109","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":65859,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"baseExpression":{"id":65851,"name":"payments","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65743,"src":"4009:8:109","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Payment_$65728_storage_$","typeString":"mapping(uint256 => struct ChatterPayVault.Payment storage ref)"}},"id":65853,"indexExpression":{"id":65852,"name":"_id","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65846,"src":"4018:3:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4009:13:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage","typeString":"struct ChatterPayVault.Payment storage ref"}},"id":65854,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4023:10:109","memberName":"isCommited","nodeType":"MemberAccess","referencedDeclaration":65723,"src":"4009:24:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"expression":{"baseExpression":{"id":65855,"name":"payments","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65743,"src":"4037:8:109","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Payment_$65728_storage_$","typeString":"mapping(uint256 => struct ChatterPayVault.Payment storage ref)"}},"id":65857,"indexExpression":{"id":65856,"name":"_id","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65846,"src":"4046:3:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4037:13:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage","typeString":"struct ChatterPayVault.Payment storage ref"}},"id":65858,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4051:10:109","memberName":"isRedeemed","nodeType":"MemberAccess","referencedDeclaration":65725,"src":"4037:24:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"4009:52:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":65863,"nodeType":"IfStatement","src":"4005:105:109","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":65860,"name":"ChatterPayVault__InvalidId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65704,"src":"4082:26:109","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":65861,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4082:28:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":65862,"nodeType":"RevertStatement","src":"4075:35:109"}},{"condition":{"commonType":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"id":65869,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"baseExpression":{"id":65864,"name":"payments","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65743,"src":"4124:8:109","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Payment_$65728_storage_$","typeString":"mapping(uint256 => struct ChatterPayVault.Payment storage ref)"}},"id":65866,"indexExpression":{"id":65865,"name":"_id","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65846,"src":"4133:3:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4124:13:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage","typeString":"struct ChatterPayVault.Payment storage ref"}},"id":65867,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4138:12:109","memberName":"passwordHash","nodeType":"MemberAccess","referencedDeclaration":65717,"src":"4124:26:109","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":65868,"name":"_commitmentHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65848,"src":"4154:15:109","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"4124:45:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":65873,"nodeType":"IfStatement","src":"4120:110:109","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":65870,"name":"ChatterPayVault__InvalidCommitmentHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65706,"src":"4190:38:109","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":65871,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4190:40:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":65872,"nodeType":"RevertStatement","src":"4183:47:109"}},{"expression":{"id":65880,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"baseExpression":{"id":65874,"name":"payments","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65743,"src":"4240:8:109","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Payment_$65728_storage_$","typeString":"mapping(uint256 => struct ChatterPayVault.Payment storage ref)"}},"id":65876,"indexExpression":{"id":65875,"name":"_id","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65846,"src":"4249:3:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4240:13:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage","typeString":"struct ChatterPayVault.Payment storage ref"}},"id":65877,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"4254:8:109","memberName":"redeemer","nodeType":"MemberAccess","referencedDeclaration":65719,"src":"4240:22:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"id":65878,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"4265:3:109","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":65879,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4269:6:109","memberName":"sender","nodeType":"MemberAccess","src":"4265:10:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"4240:35:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":65881,"nodeType":"ExpressionStatement","src":"4240:35:109"},{"expression":{"id":65887,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"baseExpression":{"id":65882,"name":"payments","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65743,"src":"4285:8:109","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Payment_$65728_storage_$","typeString":"mapping(uint256 => struct ChatterPayVault.Payment storage ref)"}},"id":65884,"indexExpression":{"id":65883,"name":"_id","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65846,"src":"4294:3:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4285:13:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage","typeString":"struct ChatterPayVault.Payment storage ref"}},"id":65885,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"4299:10:109","memberName":"isCommited","nodeType":"MemberAccess","referencedDeclaration":65723,"src":"4285:24:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"74727565","id":65886,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"4312:4:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},"src":"4285:31:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":65888,"nodeType":"ExpressionStatement","src":"4285:31:109"},{"expression":{"id":65895,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"baseExpression":{"id":65889,"name":"payments","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65743,"src":"4326:8:109","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Payment_$65728_storage_$","typeString":"mapping(uint256 => struct ChatterPayVault.Payment storage ref)"}},"id":65891,"indexExpression":{"id":65890,"name":"_id","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65846,"src":"4335:3:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4326:13:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage","typeString":"struct ChatterPayVault.Payment storage ref"}},"id":65892,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"4340:15:109","memberName":"commitTimestamp","nodeType":"MemberAccess","referencedDeclaration":65727,"src":"4326:29:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"id":65893,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"4358:5:109","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":65894,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4364:9:109","memberName":"timestamp","nodeType":"MemberAccess","src":"4358:15:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4326:47:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65896,"nodeType":"ExpressionStatement","src":"4326:47:109"},{"eventCall":{"arguments":[{"expression":{"id":65898,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"4418:3:109","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":65899,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4422:6:109","memberName":"sender","nodeType":"MemberAccess","src":"4418:10:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"expression":{"baseExpression":{"id":65900,"name":"payments","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65743,"src":"4442:8:109","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Payment_$65728_storage_$","typeString":"mapping(uint256 => struct ChatterPayVault.Payment storage ref)"}},"id":65902,"indexExpression":{"id":65901,"name":"_id","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65846,"src":"4451:3:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4442:13:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage","typeString":"struct ChatterPayVault.Payment storage ref"}},"id":65903,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4456:5:109","memberName":"token","nodeType":"MemberAccess","referencedDeclaration":65713,"src":"4442:19:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"expression":{"baseExpression":{"id":65904,"name":"payments","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65743,"src":"4475:8:109","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Payment_$65728_storage_$","typeString":"mapping(uint256 => struct ChatterPayVault.Payment storage ref)"}},"id":65906,"indexExpression":{"id":65905,"name":"_id","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65846,"src":"4484:3:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4475:13:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage","typeString":"struct ChatterPayVault.Payment storage ref"}},"id":65907,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4489:7:109","memberName":"balance","nodeType":"MemberAccess","referencedDeclaration":65715,"src":"4475:21:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":65897,"name":"PaymentCommitted","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65759,"src":"4388:16:109","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,address,uint256)"}},"id":65908,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4388:118:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":65909,"nodeType":"EmitStatement","src":"4383:123:109"}]},"documentation":{"id":65844,"nodeType":"StructuredDocumentation","src":"3301:618:109","text":" @notice Commits a redeemer for a reserved payment by providing the correct commitment hash.\n @dev Updates the payment's redeemer and timestamp, locking it for redemption.\n @param _id The unique identifier for the payment.\n @param _commitmentHash The keccak256 hash of the password used for commitment verification.\n @custom:events Emits a `PaymentCommitted` event on success.\n @custom:reverts ChatterPayVault__InvalidId if the payment is already committed or redeemed.\n @custom:reverts ChatterPayVault__InvalidCommitmentHash if the commitment hash does not match."},"functionSelector":"483e7aaa","implemented":true,"kind":"function","modifiers":[],"name":"commitForPayment","nameLocation":"3933:16:109","parameters":{"id":65849,"nodeType":"ParameterList","parameters":[{"constant":false,"id":65846,"mutability":"mutable","name":"_id","nameLocation":"3958:3:109","nodeType":"VariableDeclaration","scope":65911,"src":"3950:11:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65845,"name":"uint256","nodeType":"ElementaryTypeName","src":"3950:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":65848,"mutability":"mutable","name":"_commitmentHash","nameLocation":"3971:15:109","nodeType":"VariableDeclaration","scope":65911,"src":"3963:23:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":65847,"name":"bytes32","nodeType":"ElementaryTypeName","src":"3963:7:109","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"}],"src":"3949:38:109"},"returnParameters":{"id":65850,"nodeType":"ParameterList","parameters":[],"src":"3995:0:109"},"scope":66124,"stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"id":66037,"nodeType":"FunctionDefinition","src":"5394:1144:109","nodes":[],"body":{"id":66036,"nodeType":"Block","src":"5462:1076:109","nodes":[],"statements":[{"assignments":[65921],"declarations":[{"constant":false,"id":65921,"mutability":"mutable","name":"payment","nameLocation":"5488:7:109","nodeType":"VariableDeclaration","scope":66036,"src":"5472:23:109","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment"},"typeName":{"id":65920,"nodeType":"UserDefinedTypeName","pathNode":{"id":65919,"name":"Payment","nameLocations":["5472:7:109"],"nodeType":"IdentifierPath","referencedDeclaration":65728,"src":"5472:7:109"},"referencedDeclaration":65728,"src":"5472:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment"}},"visibility":"internal"}],"id":65925,"initialValue":{"baseExpression":{"id":65922,"name":"payments","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65743,"src":"5498:8:109","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Payment_$65728_storage_$","typeString":"mapping(uint256 => struct ChatterPayVault.Payment storage ref)"}},"id":65924,"indexExpression":{"id":65923,"name":"_id","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65914,"src":"5507:3:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"5498:13:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage","typeString":"struct ChatterPayVault.Payment storage ref"}},"nodeType":"VariableDeclarationStatement","src":"5472:39:109"},{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":65931,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":65926,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65921,"src":"5525:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":65927,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5533:10:109","memberName":"isRedeemed","nodeType":"MemberAccess","referencedDeclaration":65725,"src":"5525:18:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"id":65930,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"5547:19:109","subExpression":{"expression":{"id":65928,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65921,"src":"5548:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":65929,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5556:10:109","memberName":"isCommited","nodeType":"MemberAccess","referencedDeclaration":65723,"src":"5548:18:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"5525:41:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":65935,"nodeType":"IfStatement","src":"5521:94:109","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":65932,"name":"ChatterPayVault__InvalidId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65704,"src":"5587:26:109","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":65933,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5587:28:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":65934,"nodeType":"RevertStatement","src":"5580:35:109"}},{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":65940,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":65936,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65921,"src":"5629:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":65937,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5637:8:109","memberName":"redeemer","nodeType":"MemberAccess","referencedDeclaration":65719,"src":"5629:16:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"expression":{"id":65938,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"5649:3:109","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":65939,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5653:6:109","memberName":"sender","nodeType":"MemberAccess","src":"5649:10:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"5629:30:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":65944,"nodeType":"IfStatement","src":"5625:94:109","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":65941,"name":"ChatterPayVault__UnauthorizedRedeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65694,"src":"5680:37:109","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":65942,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5680:39:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":65943,"nodeType":"RevertStatement","src":"5673:46:109"}},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":65948,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":65945,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65921,"src":"5733:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":65946,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5741:7:109","memberName":"balance","nodeType":"MemberAccess","referencedDeclaration":65715,"src":"5733:15:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":65947,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"5752:1:109","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"5733:20:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":65952,"nodeType":"IfStatement","src":"5729:69:109","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":65949,"name":"ChatterPayVault__NoBalanceToRedeem","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65688,"src":"5762:34:109","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":65950,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5762:36:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":65951,"nodeType":"RevertStatement","src":"5755:43:109"}},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":65959,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":65953,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"5813:5:109","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":65954,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5819:9:109","memberName":"timestamp","nodeType":"MemberAccess","src":"5813:15:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":65958,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":65955,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65921,"src":"5831:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":65956,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5839:15:109","memberName":"commitTimestamp","nodeType":"MemberAccess","referencedDeclaration":65727,"src":"5831:23:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":65957,"name":"COMMIT_TIMEOUT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65738,"src":"5857:14:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5831:40:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5813:58:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":65964,"nodeType":"IfStatement","src":"5809:132:109","trueBody":{"id":65963,"nodeType":"Block","src":"5873:68:109","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":65960,"name":"ChatterPayVault__CommitmentExpired","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65698,"src":"5894:34:109","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":65961,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5894:36:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":65962,"nodeType":"RevertStatement","src":"5887:43:109"}]}},{"condition":{"commonType":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"id":65973,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"arguments":[{"id":65968,"name":"_password","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65916,"src":"6045:9:109","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"expression":{"id":65966,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-1,"src":"6028:3:109","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":65967,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"6032:12:109","memberName":"encodePacked","nodeType":"MemberAccess","src":"6028:16:109","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":65969,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6028:27:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":65965,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-8,"src":"6018:9:109","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":65970,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6018:38:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"expression":{"id":65971,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65921,"src":"6060:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":65972,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"6068:12:109","memberName":"passwordHash","nodeType":"MemberAccess","referencedDeclaration":65717,"src":"6060:20:109","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"6018:62:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":65977,"nodeType":"IfStatement","src":"6014:123:109","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":65974,"name":"ChatterPayVault__IncorrectPassword","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65690,"src":"6101:34:109","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":65975,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6101:36:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":65976,"nodeType":"RevertStatement","src":"6094:43:109"}},{"assignments":[65979],"declarations":[{"constant":false,"id":65979,"mutability":"mutable","name":"amount","nameLocation":"6186:6:109","nodeType":"VariableDeclaration","scope":66036,"src":"6178:14:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65978,"name":"uint256","nodeType":"ElementaryTypeName","src":"6178:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":65982,"initialValue":{"expression":{"id":65980,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65921,"src":"6195:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":65981,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"6203:7:109","memberName":"balance","nodeType":"MemberAccess","referencedDeclaration":65715,"src":"6195:15:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"6178:32:109"},{"expression":{"id":65987,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":65983,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65921,"src":"6220:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":65985,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"6228:7:109","memberName":"balance","nodeType":"MemberAccess","referencedDeclaration":65715,"src":"6220:15:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"30","id":65986,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6238:1:109","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"6220:19:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":65988,"nodeType":"ExpressionStatement","src":"6220:19:109"},{"expression":{"id":65993,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":65989,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65921,"src":"6249:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":65991,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"6257:10:109","memberName":"isRedeemed","nodeType":"MemberAccess","referencedDeclaration":65725,"src":"6249:18:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"74727565","id":65992,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"6270:4:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},"src":"6249:25:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":65994,"nodeType":"ExpressionStatement","src":"6249:25:109"},{"expression":{"id":65999,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":65995,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65921,"src":"6284:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":65997,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"6292:10:109","memberName":"isReserved","nodeType":"MemberAccess","referencedDeclaration":65721,"src":"6284:18:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"66616c7365","id":65998,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"6305:5:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},"src":"6284:26:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":66000,"nodeType":"ExpressionStatement","src":"6284:26:109"},{"expression":{"id":66005,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":66001,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65921,"src":"6320:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":66003,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"6328:10:109","memberName":"isCommited","nodeType":"MemberAccess","referencedDeclaration":65723,"src":"6320:18:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"66616c7365","id":66004,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"6341:5:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},"src":"6320:26:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":66006,"nodeType":"ExpressionStatement","src":"6320:26:109"},{"expression":{"id":66014,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":66007,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65921,"src":"6356:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":66009,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"6364:12:109","memberName":"passwordHash","nodeType":"MemberAccess","referencedDeclaration":65717,"src":"6356:20:109","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"hexValue":"30","id":66012,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6387:1:109","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":66011,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6379:7:109","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes32_$","typeString":"type(bytes32)"},"typeName":{"id":66010,"name":"bytes32","nodeType":"ElementaryTypeName","src":"6379:7:109","typeDescriptions":{}}},"id":66013,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6379:10:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"6356:33:109","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":66015,"nodeType":"ExpressionStatement","src":"6356:33:109"},{"expression":{"arguments":[{"expression":{"id":66021,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"6430:3:109","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":66022,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6434:6:109","memberName":"sender","nodeType":"MemberAccess","src":"6430:10:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":66023,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65979,"src":"6442:6:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"expression":{"id":66017,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65921,"src":"6406:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":66018,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"6414:5:109","memberName":"token","nodeType":"MemberAccess","referencedDeclaration":65713,"src":"6406:13:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":66016,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":48487,"src":"6399:6:109","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$48487_$","typeString":"type(contract IERC20)"}},"id":66019,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6399:21:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$48487","typeString":"contract IERC20"}},"id":66020,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6421:8:109","memberName":"transfer","nodeType":"MemberAccess","referencedDeclaration":48454,"src":"6399:30:109","typeDescriptions":{"typeIdentifier":"t_function_external_nonpayable$_t_address_$_t_uint256_$returns$_t_bool_$","typeString":"function (address,uint256) external returns (bool)"}},"id":66024,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6399:50:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":66025,"nodeType":"ExpressionStatement","src":"6399:50:109"},{"eventCall":{"arguments":[{"expression":{"id":66027,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65921,"src":"6481:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":66028,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"6489:6:109","memberName":"wallet","nodeType":"MemberAccess","referencedDeclaration":65711,"src":"6481:14:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"expression":{"id":66029,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65921,"src":"6497:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":66030,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"6505:5:109","memberName":"token","nodeType":"MemberAccess","referencedDeclaration":65713,"src":"6497:13:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"expression":{"id":66031,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"6512:3:109","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":66032,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6516:6:109","memberName":"sender","nodeType":"MemberAccess","src":"6512:10:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":66033,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65979,"src":"6524:6:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":66026,"name":"PaymentRedeemed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65769,"src":"6465:15:109","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_address_$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,address,address,uint256)"}},"id":66034,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6465:66:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":66035,"nodeType":"EmitStatement","src":"6460:71:109"}]},"documentation":{"id":65912,"nodeType":"StructuredDocumentation","src":"4519:870:109","text":" @notice Redeems a committed payment by providing the correct password.\n @dev Transfers the payment's balance to the redeemer after verifying the password.\n @param _id The unique identifier for the payment.\n @param _password The password corresponding to the payment's password hash.\n @custom:events Emits a `PaymentRedeemed` event on success.\n @custom:reverts ChatterPayVault__InvalidId if the payment is not committed or already redeemed.\n @custom:reverts ChatterPayVault__UnauthorizedRedeemer if the caller is not the redeemer.\n @custom:reverts ChatterPayVault__NoBalanceToRedeem if the payment balance is zero.\n @custom:reverts ChatterPayVault__CommitmentExpired if the commitment timeout has elapsed.\n @custom:reverts ChatterPayVault__IncorrectPassword if the password does not match the hash."},"functionSelector":"f76dac14","implemented":true,"kind":"function","modifiers":[],"name":"redeemPayment","nameLocation":"5403:13:109","parameters":{"id":65917,"nodeType":"ParameterList","parameters":[{"constant":false,"id":65914,"mutability":"mutable","name":"_id","nameLocation":"5425:3:109","nodeType":"VariableDeclaration","scope":66037,"src":"5417:11:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":65913,"name":"uint256","nodeType":"ElementaryTypeName","src":"5417:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":65916,"mutability":"mutable","name":"_password","nameLocation":"5444:9:109","nodeType":"VariableDeclaration","scope":66037,"src":"5430:23:109","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":65915,"name":"string","nodeType":"ElementaryTypeName","src":"5430:6:109","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"5416:38:109"},"returnParameters":{"id":65918,"nodeType":"ParameterList","parameters":[],"src":"5462:0:109"},"scope":66124,"stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"id":66123,"nodeType":"FunctionDefinition","src":"7213:896:109","nodes":[],"body":{"id":66122,"nodeType":"Block","src":"7272:837:109","nodes":[],"statements":[{"assignments":[66047],"declarations":[{"constant":false,"id":66047,"mutability":"mutable","name":"payment","nameLocation":"7298:7:109","nodeType":"VariableDeclaration","scope":66122,"src":"7282:23:109","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment"},"typeName":{"id":66046,"nodeType":"UserDefinedTypeName","pathNode":{"id":66045,"name":"Payment","nameLocations":["7282:7:109"],"nodeType":"IdentifierPath","referencedDeclaration":65728,"src":"7282:7:109"},"referencedDeclaration":65728,"src":"7282:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment"}},"visibility":"internal"}],"id":66051,"initialValue":{"baseExpression":{"id":66048,"name":"payments","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65743,"src":"7308:8:109","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Payment_$65728_storage_$","typeString":"mapping(uint256 => struct ChatterPayVault.Payment storage ref)"}},"id":66050,"indexExpression":{"id":66049,"name":"_id","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":66042,"src":"7317:3:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"7308:13:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage","typeString":"struct ChatterPayVault.Payment storage ref"}},"nodeType":"VariableDeclarationStatement","src":"7282:39:109"},{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":66056,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":66052,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":66047,"src":"7335:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":66053,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"7343:6:109","memberName":"wallet","nodeType":"MemberAccess","referencedDeclaration":65711,"src":"7335:14:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"expression":{"id":66054,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"7353:3:109","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":66055,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"7357:6:109","memberName":"sender","nodeType":"MemberAccess","src":"7353:10:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"7335:28:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":66060,"nodeType":"IfStatement","src":"7331:90:109","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":66057,"name":"ChatterPayVault__UnauthorizedCancel","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65708,"src":"7384:35:109","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":66058,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7384:37:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":66059,"nodeType":"RevertStatement","src":"7377:44:109"}},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":66064,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":66061,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":66047,"src":"7435:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":66062,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"7443:7:109","memberName":"balance","nodeType":"MemberAccess","referencedDeclaration":65715,"src":"7435:15:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":66063,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7454:1:109","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"7435:20:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":66068,"nodeType":"IfStatement","src":"7431:69:109","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":66065,"name":"ChatterPayVault__NoBalanceToCancel","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65700,"src":"7464:34:109","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":66066,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7464:36:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":66067,"nodeType":"RevertStatement","src":"7457:43:109"}},{"condition":{"commonType":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"id":66075,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":66069,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":66047,"src":"7564:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":66070,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"7572:12:109","memberName":"passwordHash","nodeType":"MemberAccess","referencedDeclaration":65717,"src":"7564:20:109","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"hexValue":"30","id":66073,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7596:1:109","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":66072,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"7588:7:109","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes32_$","typeString":"type(bytes32)"},"typeName":{"id":66071,"name":"bytes32","nodeType":"ElementaryTypeName","src":"7588:7:109","typeDescriptions":{}}},"id":66074,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7588:10:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"7564:34:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":66089,"nodeType":"IfStatement","src":"7560:274:109","trueBody":{"id":66088,"nodeType":"Block","src":"7600:234:109","statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":66082,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":66076,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"7680:5:109","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":66077,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"7686:9:109","memberName":"timestamp","nodeType":"MemberAccess","src":"7680:15:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<=","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":66081,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":66078,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":66047,"src":"7699:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":66079,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"7707:15:109","memberName":"commitTimestamp","nodeType":"MemberAccess","referencedDeclaration":65727,"src":"7699:23:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":66080,"name":"COMMIT_TIMEOUT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65738,"src":"7725:14:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7699:40:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7680:59:109","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":66087,"nodeType":"IfStatement","src":"7676:148:109","trueBody":{"id":66086,"nodeType":"Block","src":"7741:83:109","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":66083,"name":"ChatterPayVault__CannotCancelActiveCommit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65702,"src":"7766:41:109","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":66084,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7766:43:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":66085,"nodeType":"RevertStatement","src":"7759:50:109"}]}}]}},{"assignments":[66091],"declarations":[{"constant":false,"id":66091,"mutability":"mutable","name":"amount","nameLocation":"7906:6:109","nodeType":"VariableDeclaration","scope":66122,"src":"7898:14:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":66090,"name":"uint256","nodeType":"ElementaryTypeName","src":"7898:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":66094,"initialValue":{"expression":{"id":66092,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":66047,"src":"7915:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":66093,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"7923:7:109","memberName":"balance","nodeType":"MemberAccess","referencedDeclaration":65715,"src":"7915:15:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"7898:32:109"},{"expression":{"id":66099,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":66095,"name":"payment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":66047,"src":"7940:7:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage_ptr","typeString":"struct ChatterPayVault.Payment storage pointer"}},"id":66097,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"7948:7:109","memberName":"balance","nodeType":"MemberAccess","referencedDeclaration":65715,"src":"7940:15:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"30","id":66098,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7958:1:109","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"7940:19:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":66100,"nodeType":"ExpressionStatement","src":"7940:19:109"},{"expression":{"arguments":[{"expression":{"id":66105,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"7993:3:109","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":66106,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"7997:6:109","memberName":"sender","nodeType":"MemberAccess","src":"7993:10:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":66107,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":66091,"src":"8005:6:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":66102,"name":"_erc20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":66040,"src":"7976:6:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":66101,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":48487,"src":"7969:6:109","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$48487_$","typeString":"type(contract IERC20)"}},"id":66103,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7969:14:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$48487","typeString":"contract IERC20"}},"id":66104,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"7984:8:109","memberName":"transfer","nodeType":"MemberAccess","referencedDeclaration":48454,"src":"7969:23:109","typeDescriptions":{"typeIdentifier":"t_function_external_nonpayable$_t_address_$_t_uint256_$returns$_t_bool_$","typeString":"function (address,uint256) external returns (bool)"}},"id":66108,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7969:43:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":66109,"nodeType":"ExpressionStatement","src":"7969:43:109"},{"expression":{"id":66113,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"delete","prefix":true,"src":"8022:20:109","subExpression":{"baseExpression":{"id":66110,"name":"payments","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65743,"src":"8029:8:109","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Payment_$65728_storage_$","typeString":"mapping(uint256 => struct ChatterPayVault.Payment storage ref)"}},"id":66112,"indexExpression":{"id":66111,"name":"_id","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":66042,"src":"8038:3:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"8029:13:109","typeDescriptions":{"typeIdentifier":"t_struct$_Payment_$65728_storage","typeString":"struct ChatterPayVault.Payment storage ref"}},"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":66114,"nodeType":"ExpressionStatement","src":"8022:20:109"},{"eventCall":{"arguments":[{"expression":{"id":66116,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"8075:3:109","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":66117,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"8079:6:109","memberName":"sender","nodeType":"MemberAccess","src":"8075:10:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":66118,"name":"_erc20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":66040,"src":"8087:6:109","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":66119,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":66091,"src":"8095:6:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":66115,"name":"PaymentCancelled","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":65777,"src":"8058:16:109","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,address,uint256)"}},"id":66120,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8058:44:109","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":66121,"nodeType":"EmitStatement","src":"8053:49:109"}]},"documentation":{"id":66038,"nodeType":"StructuredDocumentation","src":"6544:664:109","text":" @notice Cancels a reserved payment and returns the funds to the payer.\n @dev Allows cancellation if no active commitment exists or if the commitment has expired.\n @param _erc20 The address of the ERC20 token used in the payment.\n @param _id The unique identifier for the payment.\n @custom:events Emits a `PaymentCancelled` event on success.\n @custom:reverts ChatterPayVault__UnauthorizedCancel if the caller is not the payer.\n @custom:reverts ChatterPayVault__NoBalanceToCancel if the payment balance is zero.\n @custom:reverts ChatterPayVault__CannotCancelActiveCommit if the commitment has not expired."},"functionSelector":"a20dfe6b","implemented":true,"kind":"function","modifiers":[],"name":"cancelPayment","nameLocation":"7222:13:109","parameters":{"id":66043,"nodeType":"ParameterList","parameters":[{"constant":false,"id":66040,"mutability":"mutable","name":"_erc20","nameLocation":"7244:6:109","nodeType":"VariableDeclaration","scope":66123,"src":"7236:14:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":66039,"name":"address","nodeType":"ElementaryTypeName","src":"7236:7:109","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":66042,"mutability":"mutable","name":"_id","nameLocation":"7260:3:109","nodeType":"VariableDeclaration","scope":66123,"src":"7252:11:109","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":66041,"name":"uint256","nodeType":"ElementaryTypeName","src":"7252:7:109","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"7235:29:109"},"returnParameters":{"id":66044,"nodeType":"ParameterList","parameters":[],"src":"7272:0:109"},"scope":66124,"stateMutability":"nonpayable","virtual":false,"visibility":"public"}],"abstract":false,"baseContracts":[],"canonicalName":"ChatterPayVault","contractDependencies":[],"contractKind":"contract","documentation":{"id":65709,"nodeType":"StructuredDocumentation","src":"670:244:109","text":" @title ChatterPayVault\n @notice A vault contract for reserving, committing, redeeming, and canceling payments with password-protected commitments.\n @dev Utilizes ERC20 tokens and includes commitment expiration for added security."},"fullyImplemented":true,"linearizedBaseContracts":[66124],"name":"ChatterPayVault","nameLocation":"924:15:109","scope":66125,"usedErrors":[65688,65690,65694,65698,65700,65702,65704,65706,65708],"usedEvents":[65751,65759,65769,65777]}],"license":"MIT"},"id":109}